<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
    <meta name="author" content="AdminKit">
    <meta name="keywords" content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

    <!-- bootstrap5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!-- font -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="shortcut icon" href="img/icons/icon-48x48.png" />

    <!-- template -->
    <link rel="canonical" href="https://demo-basic.adminkit.io/" />
    <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>

    <title>Osam Template</title>

    <link href="css/app.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <!-- custom -->
    <link href="common.css" rel="stylesheet">
</head>

<body>
<div class="wrapper">
    <nav id="sidebar" class="sidebar js-sidebar">
        <div class="sidebar-content js-simplebar">
            <a class="sidebar-brand" href="index.html">
                <span class="align-middle">User</span>
            </a>
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a class="sidebar-link" href="index.html">
                        <i class="align-middle" data-feather="sliders"></i> <span class="align-middle">Dashboard</span>
                    </a>
                </li>
                <li class="sidebar-header">교재관리</li>
                <li class="sidebar-item active">
                    <a class="sidebar-link" href="FO_vocabulary.html">
                        <span class="align-middle">단어장</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_grammar.html">
                        <span class="align-middle">문법</span>
                    </a>
                </li>
                <li class="sidebar-header">회원관리</li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_homework.html">
                        <span class="align-middle">숙제현황</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_exam.html">
                        <span class="align-middle">시험현황</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_myPage.html">
                        <span class="align-middle">내 정보관리</span>
                    </a>
                </li>
                <li class="sidebar-header">게시판 관리</li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_question.html">
                        <span class="align-middle">1:1 문의</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a class="sidebar-link" href="FO_qna.html">
                        <span class="align-middle">QnA</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="main">
        <nav class="navbar navbar-expand navbar-light navbar-bg">
            <a class="sidebar-toggle js-sidebar-toggle">
                <i class="hamburger align-self-center"></i>
            </a>
            <div class="navbar-collapse collapse">
                <ul class="navbar-nav navbar-align">
                    <li class="nav-item dropdown">
                        <!-- 기존 -->
                        <!-- <a class="nav-icon dropdown-toggle" href="#" id="alertsDropdown" data-bs-toggle="dropdown"> -->
                        <!-- Bootstrap5 -->
                        <a class="nav-icon" onclick="fn_dropdownToggle1();">
                            <div class="position-relative">
                                <i class="align-middle" data-feather="bell"></i>
                                <span class="indicator">4</span>
                            </div>
                        </a>
                        <!-- 기존 -->
                        <!-- <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end py-0" aria-labelledby="alertsDropdown" id="dropdownTarget"> -->
                        <!-- Bootstrap5 -->
                        <div class="collapse dropdown-menu dropdown-menu-lg" id="dropdownTarget1" style="display: none;">
                            <div class="dropdown-menu-header">
                                4 New Notifications
                            </div>
                            <div class="list-group">
                                <a href="#" class="list-group-item">
                                    <div class="row g-0 align-items-center">
                                        <div class="col-2">
                                            <i class="text-danger" data-feather="alert-circle"></i>
                                        </div>
                                        <div class="col-10">
                                            <div class="text-dark">Update completed</div>
                                            <div class="text-muted small mt-1">Restart server 12 to complete the update.</div>
                                            <div class="text-muted small mt-1">30m ago</div>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item">
                                    <div class="row g-0 align-items-center">
                                        <div class="col-2">
                                            <i class="text-warning" data-feather="bell"></i>
                                        </div>
                                        <div class="col-10">
                                            <div class="text-dark">Lorem ipsum</div>
                                            <div class="text-muted small mt-1">Aliquam ex eros, imperdiet vulputate hendrerit et.</div>
                                            <div class="text-muted small mt-1">2h ago</div>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item">
                                    <div class="row g-0 align-items-center">
                                        <div class="col-2">
                                            <i class="text-primary" data-feather="home"></i>
                                        </div>
                                        <div class="col-10">
                                            <div class="text-dark">Login from 192.186.1.8</div>
                                            <div class="text-muted small mt-1">5h ago</div>
                                        </div>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item">
                                    <div class="row g-0 align-items-center">
                                        <div class="col-2">
                                            <i class="text-success" data-feather="user-plus"></i>
                                        </div>
                                        <div class="col-10">
                                            <div class="text-dark">New connection</div>
                                            <div class="text-muted small mt-1">Christina accepted your request.</div>
                                            <div class="text-muted small mt-1">14h ago</div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                            <div class="dropdown-menu-footer">
                                <a href="#" class="text-muted">Show all notifications</a>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown" onclick="fn_dropdownToggle2();">
                            <!-- <img src="img/avatars/avatar.jpg" class="avatar img-fluid rounded me-1" alt="Charles Hall" />  -->
                            <span class="text-dark">Name</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end" id="dropdownTarget2" style="display: none;max-width: 160px;">
                            <a class="dropdown-item" href="FO_myPage.html"><i class="align-middle me-1" data-feather="user"></i> Profile</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="FO_signin.html">Log out</a>
                        </div>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="content">
            <div class="container-fluid p-0">
                <div class="mb-3">
                    <h1 class="h3" style="display: inline;">단어장</h1>
                    <div style="float: right;">
                        <div class="timer time-desc" style="float: left;display: none;">
                            <span><i class="far fa-fw fa-clock"></i></span>
                            <span class="num-box min">30</span>
                            <span class="txt">:</span>
                            <span class="num-box sec">00</span>
                        </div>
                        <div style="float: right;">
                            <button type="button" class="btn btn-primary" id="btnStart">시험</button>
                            <button type="button" class="btn btn-danger" id="btnEnd" style="display: none;">종료</button>
                            <!-- <button type="button" class="btn btn-danger" id="btnEnd" style="display: none;">취소</button> -->
                        </div>
                    </div>
                </div>
                <div class="alert alert-warning alert-dismissible">
                    <div class="alert-message">
                        <h4 class="alert-heading">시험 주의사항</h4>
                        <p>
                            Level은 1개만 선택 가능합니다. Chapter는 최소 1개이상 선택해 주세요.
                            <br/>답이 2개 이상인 경우 쉼표를 사용하여 구분합니다.
                            <br/>시험에서 단어순서는 랜덤으로 노출됩니다.
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <div class="row">
                                    <div class="mb-3 col-md-3">
                                        <label class="form-label" for="level">Level</label>
                                        <select class="form-control" id="level">
                                            <option>A</option>
                                            <option>B</option>
                                            <option>c</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-3">
                                        <label class="form-label" for="chapter">Chapter</label>
                                        <select class="form-control" id="chapter">
                                            <option value="1">1강</option>
                                            <option value="2">2강</option>
                                            <option value="3">3강</option>
                                            <option value="4">4강</option>
                                        </select>
                                    </div>
                                    <div class="mb-3 col-md-6" id="chList">
                                        <!-- <div class="badge bg-success ms-2">1강 <i class="fas fa-times"></i></div> -->
                                        <button class="btn btn-success btn-sm" name="btn-chapter" data-value="1" style="margin-top: 28px;">1강 <i class="fas fa-times"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body" id="wordList"></div>
                        </div>
                        <!-- .card -->
                    </div>
                </div>
            </div>
        </main>

    </div>
</div>

<!-- Test Modal -->
<div class="modal fade" id="testModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">TEST OPTION</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-3">
                <form>
                    <div class="mb-3 row">
                        <label class="col-form-label col-sm-3 text-sm-end">시험유형</label>
                        <div class="col-sm-9">
                            <select class="form-control" id="testType">
                                <option value="01" selected>영단어</option>
                                <option value="02">의미</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-form-label col-sm-3 text-sm-end">합격기준</label>
                        <div class="col-sm-9">
                            <select class="form-control">
                                <option value="80" selected>80%</option>
                                <option value="90">90%</option>
                                <option value="100">1000%</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-form-label col-sm-3 text-sm-end">시험시간</label>
                        <div class="col-sm-9">
                            <select class="form-control" id="testTime">
                                <option value="30" selected>30분</option>
                                <option value="60">1시간</option>
                                <option value="90">1시간 30분</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="btnTestStart">Start</button>
            </div>
        </div>
    </div>
</div>

<!-- Test Result Modal -->
<div class="modal fade" id="resultModal" tabindex="-1" role="dialog" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">TEST RESULT</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-3" style="text-align: center;">
                <h4>PASS or FAIL</h4>
                <p>70% (35/50)</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script src="js/app.js"></script>
<script src="component.js"></script>
<script>
        let timer;
        let obj = {
            arry: ['1'],
            words: { // Class 선언
                '1': [{
                    'id': '0000000001',
                    'word': 'ability',
                    'mean': '능력'
                }, {
                    'id': '0000000002',
                    'word': 'advise',
                    'mean': '충고하다'
                }, {
                    'id': '0000000003',
                    'word': 'amount',
                    'mean': '양,총계,이르다,마찬가지이다'
                }, {
                    'id': '0000000004',
                    'word': 'attitude',
                    'mean': '태도'
                }, {
                    'id': '0000000005',
                    'word': 'audience',
                    'mean': '청중,관객'
                }],
                '2': [, {
                    'id': '0000000007',
                    'word': 'average',
                    'mean': '평균,평균이 되다'
                }, {
                    'id': '0000000008',
                    'word': 'behave',
                    'mean': '행동하다'
                }, {
                    'id': '0000000009',
                    'word': 'comfort',
                    'mean': '편안,위로,위안,위로하다'
                }, {
                    'id': '0000000010',
                    'word': 'consume',
                    'mean': '소비하다'
                }],
                '3': [{
                    'id': '0000000011',
                    'word': 'contain',
                    'mean': '포함하다'
                }, {
                    'id': '0000000012',
                    'word': 'determine',
                    'mean': '결정하다,결심하다'
                }, {
                    'id': '0000000013',
                    'word': 'develop',
                    'mean': '개발하다,발전시키다,발전하다'
                }, {
                    'id': '0000000014',
                    'word': 'employ',
                    'mean': '고용하다,사용하다'
                }, {
                    'id': '0000000015',
                    'word': 'encourage',
                    'mean': '격려하다,촉진하다'
                }],
                '4': [{
                    'id': '0000000016',
                    'word': 'expense',
                    'mean': '비용'
                }, {
                    'id': '0000000017',
                    'word': 'impress',
                    'mean': '인상을 주다'
                }, {
                    'id': '0000000018',
                    'word': 'improve',
                    'mean': '발전시키다,발전하다'
                }, {
                    'id': '0000000019',
                    'word': 'individual',
                    'mean': '개인의,개인적인,개인'
                }, {
                    'id': '0000000020',
                    'word': 'influence',
                    'mean': '영향,영향을 미치다'
                }]
            },
            drawWord: function() {
                let tar = $('#chList').find('button');
                let chapter = [],
                    wordList = [];

                // 선택된 강의 확인
                tar.each(function(idx, el) {
                    chapter.push($(el).data('value'));
                });

                // 단어목록 확인
                if (chapter.length > 0) {

                    let words = this.words;

                    chapter.forEach(function(el, idx) {

                        let list = words[el];

                        list.forEach(function(el2, idx2) {
                            wordList.push(el2);
                        });
                    });
                }

                // 단어장 그리기
                if (wordList.length > 0) {

                    // 단어장 초기화
                    $('#wordList').html('');
                    let html = [];

                    wordList.forEach(function(el, idx) {
                        if ((idx == 0) || ((idx % 6) == 0)) {
                            html.push('<div class = "row">');
                        }

                        html.push('<div class="col-12 col-lg-2 card mb-3 bg-light border wordTest">');
                        html.push('<div class="card-body p-3">');
                        html.push('<p>');
                        html.push(el.word);
                        html.push('</p>');
                        html.push('<input type="text" class="form-control" value="');
                        html.push(el.mean);
                        html.push('" placeholder="Enter Answer Here">');
                        html.push('</div>');
                        html.push('</div>');

                        if (idx == 5) {
                            html.push('</div>');
                        } else if ((idx > 6) && ((idx % 6) == 5)) {
                            html.push('</div>');
                        }
                    });
                    $('#wordList').html(html.join(''));
                }
            },
            drawWordReverse: function() {
                let tar = $('#chList').find('button');
                let chapter = [],
                    wordList = [];

                // 선택된 강의 확인
                tar.each(function(idx, el) {
                    chapter.push($(el).data('value'));
                });

                // 단어목록 확인
                if (chapter.length > 0) {

                    let words = this.words;

                    chapter.forEach(function(el, idx) {

                        let list = words[el];

                        list.forEach(function(el2, idx2) {
                            wordList.push(el2);
                        });
                    });
                }

                // 단어장 그리기
                if (wordList.length > 0) {

                    // 단어장 초기화
                    $('#wordList').html('');
                    let html = [];

                    wordList.forEach(function(el, idx) {
                        if ((idx == 0) || ((idx % 6) == 0)) {
                            html.push('<div class = "row">');
                        }

                        html.push('<div class="col-12 col-lg-2 card mb-3 bg-light border wordTest">');
                        html.push('<div class="card-body p-3">');
                        html.push('<p>');
                        html.push(el.mean);
                        html.push('</p>');
                        html.push('<input type="text" class="form-control" value="" placeholder="Enter Answer Here">');
                        html.push('</div>');
                        html.push('</div>');

                        if (idx == 5) {
                            html.push('</div>');
                        } else if ((idx > 6) && ((idx % 6) == 5)) {
                            html.push('</div>');
                        }
                    });
                    $('#wordList').html(html.join(''));
                }
            },
            drawChaper: function() {
                // 강의 선택 영역 초기화
                $('#chList').html('');

                let html = [];
                this.arry.forEach(function(el, idx) {
                    console.log(el);
                    html.push('<button class="btn btn-success btn-sm" name="btn-chapter" style="margin-top: 28px;margin-right: 5px;" data-value="');
                    html.push(el);
                    html.push('">');
                    html.push(el);
                    html.push('강');
                    html.push(' <i class = "fas fa-times"></i>');
                    html.push('</button>');
                });

                $('#chList').html(html.join(''));
            }
        };
        $(document).ready(function() {

            // 단어장 그리기
            obj.drawWord();

            // 강의 선택
            $('#chapter').change(function(e) {
                let tar = $(e.currentTarget).val(),
                    cnt = 0;

                obj.arry.forEach(function(el, idx) {
                    if (tar == el) cnt++;;
                });

                if (cnt < 1) {
                    obj.arry.push(tar);
                }

                obj.drawChaper(); // 강의 선택 정보 그리기
                obj.drawWord(); // 단어장 그리기

            });

            // 시험확인
            $('#btnStart').click(function() {
                if (confirm('시험보시겠습니까?')) {
                    $('#testModal').modal('show');
                }
            });

            // 시험시작
            $('#btnTestStart').click(function() {
                var testType = $('#testType option:selected').val();
                var testTime = $('#testTime option:selected').val();

                // 버튼
                $('#btnStart').hide();
                $('#btnEnd').show();

                // 시험범위
                $('#level').prop('disabled', true);
                $('#chapter').prop('disabled', true);
                $('button[name=btn-chapter]').prop('disabled', true);

                // close modal
                $('#testModal').modal('hide');

                if (testType == '01') {
                    obj.drawWordReverse();
                } else {
                    $('div.wordTest input').val('');
                }

                // 시험시간
                $('.num-box.min').text(testTime);
                $('div.timer').show();
                startTimer();
            });

            // 시험저장
            $('#btnEnd').click(function() {
                if (confirm('저장하시겠습니까?')) {
                    init();
                }
            });
        });

        // 강의 선택 해제
        $(document).on('click', '[name=btn-chapter] svg', function() {
            let cnt = $('[name=btn-chapter]').length;
            if (cnt == 1) {
                alert('Chapter는 최소 1개이상 선택해 주세요.');
            } else {
                let tar = $(this).parent('button');

                obj.arry.forEach(function(el, idx) {
                    if (el == tar.data('value')) {
                        obj.arry.pop(idx, 1);
                    }
                });

                tar.remove();

                obj.drawWord(); // 단어장 그리기
            }
        });

        // 시험시간
        function startTimer() {
            let target = $('.time-desc');

            let time = Number($('.num-box.min').text()) * 60, // 실행시간
                min = 0, // 분
                sec = 0; // 초

            timer = setInterval(function() {
                min = parseInt(time / 60);
                sec = time % 60;
                time--;

                $('.num-box.min').text(min);
                $('.num-box.sec').text(sec);

                if (time < 0) {
                    // 시험종료
                    alert('시험이 종료되었습니다.');
                    init();
                }
            }, 1000);
        }

        function stopTimer() {
            clearInterval(timer);
            $('.num-box.min').text(0);
            $('.num-box.sec').text(0);
        }

        function init() {
            // 버튼
            $('#btnStart').show();
            $('#btnEnd').hide();

            // 시험범위
            $('#level').prop('disabled', false);
            $('#chapter').prop('disabled', false);
            $('button[name=btn-chapter]').prop('disabled', false);

            // 시험결과 modal
            $('#resultModal').modal('show');

            // 시험시간
            $('div.timer').hide();
            stopTimer();
        }
    </script>
</body>

</html>

<!-- https://demo.adminkit.io/tables-bootstrap.html -->